<?xml version="1.0" ?>
<launch>
   <!-- add joint info, pid settings and initialisation -->
   <include file="$(find omni_control)/launch/parameter.launch" />
   <rosparam file="$(find omni_control)/config/joint_velocity.yaml" command="load" />
   <arg name="debug" default="false" />
   <arg name="gui" default="true" />
   <arg name="headless" default="false" />
   <arg name="paused" default="true" />
   <arg name="use_sim_time" default="true" />
   <arg name="height" default="0" />
   <!-- get world -->
   <include file="$(find gazebo_ros)/launch/empty_world.launch">
      <arg name="debug" value="$(arg debug)" />
      <arg name="gui" value="$(arg gui)" />
      <arg name="paused" value="$(arg paused)" />
      <arg name="use_sim_time" value="$(arg use_sim_time)" />
      <arg name="headless" value="$(arg headless)" />
      <arg name="world_name" value="worlds/empty.world" />
      <!--arg
			name="physics"
			value="simbody"
		/-->
   </include>
   <!-- Load the URDF into the ROS Parameter Server -->
   <param name="robot_description" command="$(find xacro)/xacro.py '$(find omni_description)/xacro/omni.urdf.xacro'" />
   <!-- spawn robot -->
   <node name="urdf_spawner" pkg="gazebo_ros" type="spawn_model" args="-urdf -model robot -param robot_description -model omnibase -z $(arg height)" ns="omnibase" />
   <!-- run controllers -->
   <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher" respawn="false" output="screen" ns="omnibase">
      <remap from="/joint_states" to="/omnibase/joint_states" /> 
   </node>
   <node name="controller_spawner" pkg="controller_manager" type="spawner" respawn="false" output="screen" args="joint_state_controller left_joint_velocity_controller back_joint_velocity_controller right_joint_velocity_controller" ns="/omnibase" />
</launch>


